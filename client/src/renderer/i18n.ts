import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const resources = {
  en: {
    translation: {
      common: {
        appName: 'DMS Client',
        helperApp: 'Document Management System',
        save: 'Save',
        close: 'Close',
        cancel: 'Cancel',
        refresh: 'Refresh list',
        loading: 'Loading…',
        scanMorePages: 'Scan more pages',
        saveAsPdf: 'Save as PDF',
        chooseLocation: 'Choose location',
        discardSession: 'Discard session',
        previewPages: 'Preview pages',
        destination: 'Destination',
      },
      login: {
        title: 'Document Management',
        subtitle: 'Sign in to keep your files in sync.',
        apiLabel: 'API Base URL',
        workspaceLabel: 'Workspace Folder',
        chooseWorkspace: 'Choose location',
        openFolder: 'Open Folder',
        identifierLabel: 'Email or Username',
        passwordLabel: 'Password',
        twoFactorLabel: 'Two-factor Code (if required)',
        loginButton: 'Login',
        saving: 'Saving…',
        choosing: 'Processing…',
      },
      header: {
        workspaceSync: 'Workspace Sync',
        workspaceSyncDescription: 'Quick helper to keep your desktop and web files aligned.',
        searchPlaceholder: 'Search your files',
        resync: 'Resync',
        sortLabel: 'Sort by',
        sortUpdated: 'Last updated',
        sortName: 'Name',
        sortSize: 'Size',
        statusActive: 'Active',
        statusPaused: 'Paused',
        openWorkspace: 'Open Workspace',
        openWebApp: 'Open Web App',
        scanDocuments: 'Scan Documents',
        settings: 'Settings',
        logout: 'Logout',
      },
      statusBar: {
        sync: 'Sync',
        lastSync: 'Last Sync',
        api: 'API',
        workspace: 'Workspace',
        files: 'Files',
      },
      scanner: {
        modalTitle: 'Scan Documents',
        modeLabel: 'Scan mode',
        modeSingle: 'Single page',
        modeSingleDescription: 'Save as an individual image (PNG).',
        modeMulti: 'Multi-page PDF',
        modeMultiDescription: 'Combine multiple pages into one PDF. You will be prompted between pages.',
        availableScanners: 'Available scanners',
        statusPrefix: 'Status',
        source: 'Source',
        fileNameLabel: 'File name',
        noScanners: 'No scanners detected.',
        scanning: 'Scanning…',
        scanningMulti: 'Scanning… Follow the prompts on your scanner to capture each page.',
        additionalCaptured: 'Additional pages captured. Review before saving.',
        noAdditional: 'No additional pages were captured.',
        saveStatus: 'Saving PDF…',
        savedTo: 'Saved PDF to {{path}}',
        sessionDiscarded: 'Scan session discarded.',
        refresh: 'Refresh list',
        startScanning: 'Start scanning',
        close: 'Close',
        rotateLeft: 'Rotate left',
        rotateRight: 'Rotate right',
        pagesReady: '{{count}} pages ready for export',
        pagesCount: '{{count}} page',
        pagesCount_plural: '{{count}} pages',
        emptyPreview: 'No pages captured yet.',
        closePreview: 'Close preview',
        scanNextQuestion: 'Scan another page?',
      },
      workspace: {
        emptyNoSync: 'Sync is inactive. Start sync to populate your workspace.',
        emptyNoFiles: 'No files available yet.',
        emptySearch: 'No files match your search.',
        tableName: 'Name',
        tableBadge: 'Badge',
        tableLocation: 'Location',
        tableSize: 'Size',
        tableUpdated: 'Updated',
        notSyncedYet: 'Not synced yet',
      },
      language: {
        label: 'Language',
        english: 'English',
        serbian: 'Serbian',
      },
    },
  },
  sr: {
    translation: {
      common: {
        appName: 'DMS Klijent',
        helperApp: 'Sistem za upravljanje dokumentima',
        save: 'Sačuvaj',
        close: 'Zatvori',
        cancel: 'Otkaži',
        refresh: 'Osveži listu',
        loading: 'Učitavanje…',
        scanMorePages: 'Skeniraj još stranica',
        saveAsPdf: 'Sačuvaj kao PDF',
        chooseLocation: 'Izaberi lokaciju',
        discardSession: 'Odbaci sesiju',
        previewPages: 'Pregled stranica',
        destination: 'Odredište',
      },
      login: {
        title: 'Upravljanje dokumentima',
        subtitle: 'Prijavite se da bi vaši fajlovi ostali usklađeni.',
        apiLabel: 'API adresa',
        workspaceLabel: 'Radni direktorijum',
        chooseWorkspace: 'Izaberi lokaciju',
        openFolder: 'Otvori folder',
        identifierLabel: 'Email ili korisničko ime',
        passwordLabel: 'Lozinka',
        twoFactorLabel: 'Dvofaktorski kod (ako je potreban)',
        loginButton: 'Prijavi se',
        saving: 'Čuvanje…',
        choosing: 'Obrada…',
      },
      header: {
        workspaceSync: 'Sinhronizacija radnog prostora',
        workspaceSyncDescription: 'Brzi pomagač za usklađivanje desktop i web fajlova.',
        searchPlaceholder: 'Pretraži fajlove',
        resync: 'Ponovo uskladi',
        sortLabel: 'Sortiraj po',
        sortUpdated: 'Poslednje ažurirano',
        sortName: 'Naziv',
        sortSize: 'Veličina',
        statusActive: 'Aktivno',
        statusPaused: 'Pauzirano',
        openWorkspace: 'Otvori radni prostor',
        openWebApp: 'Otvori web aplikaciju',
        scanDocuments: 'Skeniraj dokumente',
        settings: 'Podešavanja',
        logout: 'Odjava',
      },
      statusBar: {
        sync: 'Sinhronizacija',
        lastSync: 'Poslednja sinhronizacija',
        api: 'API',
        workspace: 'Radni prostor',
        files: 'Fajlovi',
      },
      scanner: {
        modalTitle: 'Skeniranje dokumenata',
        modeLabel: 'Režim skeniranja',
        modeSingle: 'Jedna stranica',
        modeSingleDescription: 'Sačuvaj kao pojedinačnu sliku (PNG).',
        modeMulti: 'Više stranica (PDF)',
        modeMultiDescription: 'Spoji više stranica u jedan PDF. Aplikacija će tražiti potvrdu između stranica.',
        availableScanners: 'Dostupni skeneri',
        statusPrefix: 'Status',
        source: 'Izvor',
        fileNameLabel: 'Naziv fajla',
        noScanners: 'Nema detektovanih skenera.',
        scanning: 'Skeniranje…',
        scanningMulti: 'Skeniranje… Pratite uputstva na skeneru za svaku stranicu.',
        additionalCaptured: 'Dodatne stranice su sačuvane. Pregledajte pre snimanja.',
        noAdditional: 'Nijedna dodatna stranica nije sačuvana.',
        saveStatus: 'Čuvanje PDF fajla…',
        savedTo: 'PDF je sačuvan u {{path}}',
        sessionDiscarded: 'Sesija skeniranja je odbačena.',
        refresh: 'Osveži listu',
        startScanning: 'Započni skeniranje',
        close: 'Zatvori',
        rotateLeft: 'Rotiraj levo',
        rotateRight: 'Rotiraj desno',
        pagesReady: '{{count}} stranice spremne za izvoz',
        pagesCount: '{{count}} stranica',
        pagesCount_plural: '{{count}} stranice',
        emptyPreview: 'Još uvek nema stranica.',
        closePreview: 'Zatvori pregled',
      },
      workspace: {
        emptyNoSync: 'Sinhronizacija je neaktivna. Pokrenite je da popunite radni prostor.',
        emptyNoFiles: 'Još uvek nema fajlova.',
        emptySearch: 'Nema rezultata za pretragu.',
        tableName: 'Naziv',
        tableBadge: 'Oznaka',
        tableLocation: 'Lokacija',
        tableSize: 'Veličina',
        tableUpdated: 'Ažurirano',
        notSyncedYet: 'Još nije sinhronizovano',
      },
      language: {
        label: 'Jezik',
        english: 'Engleski',
        serbian: 'Srpski',
      },
    },
  },
};

const storedLanguage = typeof window !== 'undefined' ? localStorage.getItem('appLanguage') : null;
const fallbackLng = storedLanguage || 'en';

void i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: fallbackLng,
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false,
    },
    detection: {
      order: ['localStorage', 'navigator'],
    },
  });

export function setLanguage(language: string): void {
  void i18n.changeLanguage(language);
  if (typeof window !== 'undefined') {
    localStorage.setItem('appLanguage', language);
  }
}

export default i18n;

